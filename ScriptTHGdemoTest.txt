--============================================================
-- üîë H·ªÜ TH·ªêNG KEY 24H ‚Äì NH·∫¨P 1 L·∫¶N, 24H KH√îNG H·ªéI L·∫†I
--============================================================

-- KHAI B√ÅO SCRIPT CH√çNH (CH·ªà 1 SCRIPT)
local SCRIPT_CHINH = [[
    -- Script ch√≠nh c·ªßa b·∫°n
    loadstring(game:HttpGet("https://raw.githubusercontent.com/thanhdatdang87-lab/C-a-thg/refs/heads/main/ScriptTHG", true))()
]]

local allowedKeys = {"TeamTHGPremium", "TeamTHGPremium "}   -- 2 key h·ª£p l·ªá
local saveFile = "key_24h.txt"         -- file l∆∞u th·ªùi gian

local function now()
    return os.time()
end

-- L∆∞u 24 gi·ªù
local function saveKey()
    writefile(saveFile, tostring(now() + 24*3600))
end

-- Ki·ªÉm tra file key
local function isKeyStillValid()
    if not isfile(saveFile) then
        return false
    end

    local t = tonumber(readfile(saveFile))
    return t and t >= now()
end

--============================================================
-- ‚ö° N·∫æU ƒêANG TRONG 24H ‚Üí CH·∫†Y SCRIPT CH√çNH LI·ªÄN
--============================================================

if isKeyStillValid() then
    print("‚úÖ Key c√≤n h·∫°n ‚Üí ch·∫°y script ch√≠nh lu√¥n")
    local success, errorMsg = pcall(function()
        loadstring(SCRIPT_CHINH)()
    end)
    if not success then
        warn("L·ªói khi ch·∫°y script: " .. tostring(errorMsg))
    end
    return
end

--============================================================
-- üñ•Ô∏è UI NH·∫¨P KEY
--============================================================

local coreGui = game:GetService("CoreGui")
local gui = Instance.new("ScreenGui")
gui.Name = "KeySystem24H"
gui.Parent = coreGui
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 320, 0, 200)
frame.Position = UDim2.new(0.5, -160, 0.5, -100)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
frame.BorderSizePixel = 0

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 10)
corner.Parent = frame

-- Ti√™u ƒë·ªÅ
local title = Instance.new("TextLabel", frame)
title.Text = "üîë H·ªÜ TH·ªêNG KEY 24H"
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 20

-- Box nh·∫≠p key
local box = Instance.new("TextBox", frame)
box.PlaceholderText = "Nh·∫≠p key..."
box.Size = UDim2.new(0.8, 0, 0, 40)
box.Position = UDim2.new(0.1, 0, 0.3, 0)
box.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
box.TextColor3 = Color3.new(1, 1, 1)
box.Font = Enum.Font.Gotham
box.TextSize = 16
box.ClearTextOnFocus = false

local boxCorner = Instance.new("UICorner")
boxCorner.CornerRadius = UDim.new(0, 8)
boxCorner.Parent = box

-- N√∫t x√°c nh·∫≠n
local check = Instance.new("TextButton", frame)
check.Text = "X√ÅC NH·∫¨N"
check.Size = UDim2.new(0.8, 0, 0, 45)
check.Position = UDim2.new(0.1, 0, 0.6, 0)
check.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
check.TextColor3 = Color3.new(1, 1, 1)
check.Font = Enum.Font.GothamBold
check.TextSize = 18
check.AutoButtonColor = true

local btnCorner = Instance.new("UICorner")
btnCorner.CornerRadius = UDim.new(0, 8)
btnCorner.Parent = check

-- Th√¥ng b√°o
local info = Instance.new("TextLabel", frame)
info.Text = "Key h·ª£p l·ªá: TeamTHGPremium2024 ho·∫∑c THG_VIP_Key"
info.Size = UDim2.new(1, 0, 0, 30)
info.Position = UDim2.new(0, 0, 0.85, 0)
info.BackgroundTransparency = 1
info.TextColor3 = Color3.fromRGB(200, 200, 200)
info.Font = Enum.Font.Gotham
info.TextSize = 12

--============================================================
-- ‚úÖ CHECK KEY
--============================================================

local function isValid(k)
    k = string.gsub(k, "%s+$", "")  -- X√≥a kho·∫£ng tr·∫Øng th·ª´a
    for _, v in ipairs(allowedKeys) do
        if k == v then
            return true
        end
    end
    return false
end

check.MouseButton1Click:Connect(function()
    local key = box.Text
    if isValid(key) then
        -- L∆∞u key
        saveKey()
        
        -- Hi·ªáu ·ª©ng n√∫t
        check.Text = "‚úÖ TH√ÄNH C√îNG"
        check.BackgroundColor3 = Color3.fromRGB(0, 200, 100)
        
        -- Th√¥ng b√°o
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "TH√ÄNH C√îNG",
            Text = "Key h·ª£p l·ªá! Script s·∫Ω ch·∫°y trong 24h",
            Duration = 3,
            Icon = "rbxassetid://4483345998"
        })
        
        -- ƒê√≥ng GUI sau 1 gi√¢y
        task.wait(1)
        gui:Destroy()
        
        -- Ch·∫°y script ch√≠nh
        local success, errorMsg = pcall(function()
            loadstring(SCRIPT_CHINH)()
        end)
        
        if not success then
            warn("L·ªói khi ch·∫°y script ch√≠nh: " .. tostring(errorMsg))
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "L·ªñI",
                Text = "Kh√¥ng th·ªÉ t·∫£i script ch√≠nh",
                Duration = 5
            })
        end
    else
        -- Hi·ªáu ·ª©ng l·ªói
        check.Text = "‚ùå SAI KEY"
        check.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
        
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "L·ªñI",
            Text = "Key kh√¥ng ƒë√∫ng! Vui l√≤ng th·ª≠ l·∫°i",
            Duration = 3,
            Icon = "rbxassetid://4483345998"
        })
        
        -- Reset n√∫t sau 1 gi√¢y
        task.wait(1)
        check.Text = "X√ÅC NH·∫¨N"
        check.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
        box.Text = ""
    end
end)

-- Cho ph√©p nh·∫•n Enter ƒë·ªÉ x√°c nh·∫≠n
box.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        check.MouseButton1Click:Connect()
    end
end)

--============================================================
-- üéÆ SCRIPT CH√çNH - HUB GAME
--============================================================

-- Ch·ªù game load
repeat task.wait() until game:IsLoaded()

-- N√∫t m·ªü menu ch√≠nh
local ScreenGui = Instance.new("ScreenGui")
local ImageButton = Instance.new("ImageButton")
local UICorner = Instance.new("UICorner")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Name = "MainHubUI"

ImageButton.Parent = ScreenGui
ImageButton.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
ImageButton.BorderSizePixel = 0
ImageButton.Position = UDim2.new(0.02, 0, 0.4, 0)
ImageButton.Size = UDim2.new(0, 50, 0, 50)
ImageButton.Draggable = true
ImageButton.Image = "http://www.roblox.com/asset/?id=120909377603186"

UICorner.CornerRadius = UDim.new(1, 10)
UICorner.Parent = ImageButton

-- Giao di·ªán Fluent
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

-- C·ª≠a s·ªï ch√≠nh
local Window = Fluent:CreateWindow({
    Title = "Team THG Hub",
    SubTitle = "Premium Script Collection",
    TabWidth = 160,
    Size = UDim2.fromOffset(500, 350),
    Acrylic = true,
    Theme = "Amethyst",
    MinimizeKey = Enum.KeyCode.End
})

-- C√°c tab
local Tabs = {
    Main0 = Window:AddTab({ Title = "üì¢ Th√¥ng Tin" }),
    Main1 = Window:AddTab({ Title = "üçé Blox Fruits" }),
    Main2 = Window:AddTab({ Title = "üß† Steal A Brain" }),
    Main3 = Window:AddTab({ Title = "üå≥ 99 ƒê√™m Trong R·ª´ng" }),
    Main4 = Window:AddTab({ Title = "üåª Garden Defense" }),
    Main5 = Window:AddTab({ Title = "üåø Plant vs Brainrot" })
}

------------------------------------------------
-- TAB 1: Th√¥ng tin & Li√™n h·ªá
------------------------------------------------

Tabs.Main0:AddParagraph({
    Title = "Th√¥ng B√°o Update",
    Content = "Ng√†y 27/11: ƒê√£ th√™m script Blox Fruits m·ªõi, c·∫≠p nh·∫≠t c√°c script hi·ªán c√≥."
})

Tabs.Main0:AddButton({
    Title = "üì± TikTok Ch√≠nh",
    Description = "K√™nh c·∫≠p nh·∫≠t game & script",
    Callback = function()
        setclipboard("https://www.tiktok.com/@tng.hp.game.28")
        Fluent:Notify({
            Title = "ƒê√£ copy",
            Content = "Link TikTok ƒë√£ ƒë∆∞·ª£c sao ch√©p",
            Duration = 3
        })
    end
})

Tabs.Main0:AddButton({
    Title = "üì± TikTok Game T·ªïng H·ª£p",
    Description = "K√™nh t·ªïng h·ª£p game",
    Callback = function()
        setclipboard("https://www.tiktok.com/@tng.hp.game.28")
        Fluent:Notify({
            Title = "ƒê√£ copy",
            Content = "Link TikTok ƒë√£ ƒë∆∞·ª£c sao ch√©p",
            Duration = 3
        })
    end
})

Tabs.Main0:AddButton({
    Title = "üé• YouTube",
    Description = "K√™nh YouTube ch√≠nh th·ª©c",
    Callback = function()
        setclipboard("https://www.youtube.com/@T%E1%BB%95ngH%E1%BB%A3pgame2-v4i")
        Fluent:Notify({
            Title = "ƒê√£ copy",
            Content = "Link YouTube ƒë√£ ƒë∆∞·ª£c sao ch√©p",
            Duration = 3
        })
    end
})

Tabs.Main0:AddButton({
    Title = "üí¨ Discord",
    Description = "Coming Soon",
    Callback = function()
        Fluent:Notify({
            Title = "Th√¥ng b√°o",
            Content = "Discord s·∫Ω ra m·∫Øt s·ªõm!",
            Duration = 3
        })
    end
})

------------------------------------------------
-- TAB 2: Blox Fruits Scripts
------------------------------------------------

Tabs.Main1:AddParagraph({
    Title = "Ch·ªçn Script",
    Content = "C√°c script Blox Fruits t·ªët nh·∫•t"
})

Tabs.Main1:AddButton({
    Title = "Gravity Hub",
    Description = "Script load nhanh, ·ªïn ƒë·ªãnh",
    Callback = function()
        getgenv().Settings = {
            JoinTeam = true,
            Team = "Pirates",
            Translator = true
        }
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Dev-GravityHub/BloxFruit/refs/heads/main/Main.lua"))()
    end
})

Tabs.Main1:AddButton({
    Title = "Teddy Hub Farm",
    Description = "Giao di·ªán ƒë·∫πp, farm hi·ªáu qu·∫£",
    Callback = function()
        repeat task.wait() until game:IsLoaded() and game.Players.LocalPlayer
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Teddyseetink/Haidepzai/refs/heads/main/TeddyHub.lua"))()
    end
})

Tabs.Main1:AddButton({
    Title = "Xeter Hub",
    Description = "Script m·∫°nh, nhi·ªÅu t√≠nh nƒÉng",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/TlDinhKhoi/Xeter/refs/heads/main/Main.lua"))()
    end
})

Tabs.Main1:AddButton({
    Title = "Hiru Hub",
    Description = "Script ·ªïn ƒë·ªãnh, d·ªÖ s·ª≠ d·ª•ng",
    Callback = function()
        getgenv().Settings = {
            JoinTeam = true,
            Team = "Marines"
        }
        loadstring(game:HttpGet("https://raw.githubusercontent.com/KiddoHiru/BloxFruits/main/Source.lua"))()
    end
})

Tabs.Main1:AddButton({
    Title = "Redz Hub (Fake)",
    Description = "Phi√™n b·∫£n free c·ªßa Redz",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/luraobermeyer-jpg/redzhub/refs/heads/main/redzhub.lua.txt"))()
    end
})

Tabs.Main1:AddButton({
    Title = "Tsuo Hub",
    Description = "C√≥ t√≠nh nƒÉng gambling",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Tsuo7/TsuoHub/main/Tsuoscripts"))()
    end
})

------------------------------------------------
-- TAB 3: Steal A Brain Scripts
------------------------------------------------

Tabs.Main2:AddParagraph({
    Title = "Steal A Brain Scripts",
    Content = "C√°c script cho game Steal A Brain"
})

Tabs.Main2:AddButton({
    Title = "VietNam Hub",
    Description = "Script ·ªïn ƒë·ªãnh cho Steal A Brain",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/replit8173/VietnamHub/refs/heads/main/VietnamseHub.lua", true))()
    end
})

Tabs.Main2:AddButton({
    Title = "Chilli Hub",
    Description = "Script m·ªõi c·∫≠p nh·∫≠t",
    Callback = function()
        loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/a3e13a4a85ac4c2da17a6baab051ee1b.lua"))()
    end
})

Tabs.Main2:AddButton({
    Title = "Youi Hub",
    Description = "Instant Steal V2",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Youifpg/Steal-a-Brianrot/refs/heads/main/Instant%20Steal%20V2.lua"))()
    end
})

------------------------------------------------
-- TAB 4: 99 ƒê√™m Trong R·ª´ng
------------------------------------------------

Tabs.Main3:AddParagraph({
    Title = "99 ƒê√™m Trong R·ª´ng",
    Content = "Script cho game sinh t·ªìn"
})

Tabs.Main3:AddButton({
    Title = "FoxName Hub",
    Description = "Script ·ªïn ƒë·ªãnh, d·ªÖ d√πng",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/caomod2077/Script/refs/heads/main/FoxnameHub.lua"))()
    end
})

Tabs.Main3:AddButton({
    Title = "RingTa Hub",
    Description = "Script farm hi·ªáu qu·∫£",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/wefwef127382/99daysloader.github.io/refs/heads/main/ringta.lua"))()
    end
})

Tabs.Main3:AddButton({
    Title = "VoidWare",
    Description = "Script cao c·∫•p",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/VapeVoidware/VW-Add/main/nightsintheforest.lua", true))()
    end
})

------------------------------------------------
-- TAB 5: Garden Tower Defense
------------------------------------------------

Tabs.Main4:AddParagraph({
    Title = "Garden Tower Defense",
    Content = "Script cho game ph√≤ng th·ªß"
})

Tabs.Main4:AddButton({
    Title = "Shadow Hub",
    Description = "C·∫ßn key, script ngon",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/RilShadow10/ShadowHub/master/loader.lua"))()
    end
})

Tabs.Main4:AddButton({
    Title = "Infinite Yield",
    Description = "Admin commands c∆° b·∫£n",
    Callback = function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
    end
})

------------------------------------------------
-- TAB 6: Plant vs Brainrot
------------------------------------------------

Tabs.Main5:AddParagraph({
    Title = "Plant vs Brainrot",
    Content = "Script cho game chi·∫øn thu·∫≠t"
})

Tabs.Main5:AddButton({
    Title = "Speed Hub",
    Description = "Script farm nhanh",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))()
    end
})

Tabs.Main5:AddButton({
    Title = "KhanhLy Hub",
    Description = "Script d√†nh ri√™ng cho game",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/khoavipok/Khanhlytbao/refs/heads/main/Plants%20Vs%20Brainrots"))()
    end
})

-- K·∫øt n·ªëi n√∫t m·ªü menu
ImageButton.MouseButton1Click:Connect(function()
    Window:SelectTab(1)
    Fluent:Notify({
        Title = "Team THG Hub",
        Content = "Menu ƒë√£ ƒë∆∞·ª£c m·ªü!",
        Duration = 3
    })
end)

-- Th√¥ng b√°o kh·ªüi ƒë·ªông
task.wait(1)
Fluent:Notify({
    Title = "Ch√†o m·ª´ng!",
    Content = "Team THG Hub ƒë√£ s·∫µn s√†ng. Nh·∫•n n√∫t tr√≤n ƒë·ªÉ m·ªü menu!",
    Duration = 5
})

print("‚úÖ Team THG Hub ƒë√£ load th√†nh c√¥ng!")